<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>5 Python Must-Know Packages &#183; tobiwan.dev</title><meta name=title content="5 Python Must-Know Packages &#183; tobiwan.dev"><meta name=description content="My personal website and blog about backend engineering"><meta name=keywords content="python,"><link rel=canonical href=https://ttyobiwan.github.io/articles/python-packages/><link type=text/css rel=stylesheet href=/css/main.bundle.min.1543cfd617bf2821b25269be3a67d06424c5f70c6eba4d8d496d399e25ca63e237cc443af4976f3dcb68c872dfbab55b2eac7d248a61c4cbfa95183663c80eeb.css integrity="sha512-FUPP1he/KCGyUmm+OmfQZCTF9wxuuk2NSW05niXKY+I3zEQ69JdvPctoyHLfurVbLqx9JIphxMv6lRg2Y8gO6w=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.f99aa39bcfb5d16a28ec2236bd358df5e465058a67f58b42534a3b15882a6a3513791fd27248c6b5b5cef06337f714070d4784fb776f44d930309b64cce1a2e0.js integrity="sha512-+Zqjm8+10Woo7CI2vTWN9eRlBYpn9YtCU0o7FYgqajUTeR/SckjGtbXO8GM39xQHDUeE+3dvRNkwMJtkzOGi4A==" data-copy=Copy data-copied=Copied></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://ttyobiwan.github.io/articles/python-packages/"><meta property="og:site_name" content="tobiwan.dev"><meta property="og:title" content="5 Python Must-Know Packages"><meta property="og:description" content="Saying “you must know it” in pretty much any field of science can be quite contentious. There is no exception in software development. You may frequently see tweets or posts stating things like “you must learn Blockchain if you don’t want to be left behind” or “you must know Kubernetes because it is so popular right now.” Spoiler: You don’t. However, if you want to be an expert in your field, there might be some topics that are almost universal or are used so frequently that it can be challenging without at least a fundamental understanding."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="articles"><meta property="article:published_time" content="2023-03-08T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-08T00:00:00+00:00"><meta property="article:tag" content="Python"><meta property="og:image" content="https://ttyobiwan.github.io/articles/python-packages/featured.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ttyobiwan.github.io/articles/python-packages/featured.png"><meta name=twitter:title content="5 Python Must-Know Packages"><meta name=twitter:description content="Saying “you must know it” in pretty much any field of science can be quite contentious. There is no exception in software development. You may frequently see tweets or posts stating things like “you must learn Blockchain if you don’t want to be left behind” or “you must know Kubernetes because it is so popular right now.” Spoiler: You don’t. However, if you want to be an expert in your field, there might be some topics that are almost universal or are used so frequently that it can be challenging without at least a fundamental understanding."><meta name=twitter:image content="https://ttyobiwan.github.io/articles/python-packages/featured.png"><meta property="og:image" content="https://ttyobiwan.github.io/articles/python-packages/featured.png"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Articles","name":"5 Python Must-Know Packages","headline":"5 Python Must-Know Packages","abstract":"\u003cp\u003eSaying \u0026ldquo;you must know it\u0026rdquo; in pretty much any field of science can be quite contentious. There is no exception in software development. You may frequently see tweets or posts stating things like \u0026ldquo;you must learn Blockchain if you don\u0026rsquo;t want to be left behind\u0026rdquo; or \u0026ldquo;you must know Kubernetes because it is so popular right now.\u0026rdquo; Spoiler: You don\u0026rsquo;t. However, if you want to be an expert in your field, there might be some topics that are almost universal or are used so frequently that it can be challenging without at least a fundamental understanding.\u003c\/p\u003e","inLanguage":"en","url":"https:\/\/ttyobiwan.github.io\/articles\/python-packages\/","author":{"@type":"Person","name":"Piotr Tobiasz"},"copyrightYear":"2023","dateCreated":"2023-03-08T00:00:00\u002b00:00","datePublished":"2023-03-08T00:00:00\u002b00:00","dateModified":"2023-03-08T00:00:00\u002b00:00","keywords":["python"],"mainEntityOfPage":"true","wordCount":"3255"}]</script><meta name=author content="Piotr Tobiasz"><link href=https://github.com/ttyobiwan rel=me><link href=https://linkedin.com/in/piotr-tobiasz-dev rel=me><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px] z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3 pt-[2px] pr-0 pb-[3px] pl-0"><div><a href=/ class=flex><span class=sr-only>tobiwan.dev</span>
<img src=/img/keanu.png width=25 height=25 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt=tobiwan.dev></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium">tobiwan.dev</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=/articles/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Articles>Blog</p></a><a href=/travelling/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=Travelling>Travel</p></a><a href=/about/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title=About>Bio</p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 md:hidden"><div id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/articles/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Articles>Blog</p></a></li><li class=mt-1><a href=/travelling/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=Travelling>Travel</p></a></li><li class=mt-1><a href=/about/ class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title=About>Bio</p></a></li></ul></div></div></div></div></div></div><script type=text/javascript src=/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js integrity="sha512-AKV8c+oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ+pkPSYl5ixQYmehaQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"><img id=background-image src=/articles/python-packages/featured_hu_a40c183c0c063169.png alt="Background Image" class="absolute inset-0 w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script type=text/javascript src=/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js integrity="sha512-AKV8c+oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ+pkPSYl5ixQYmehaQ==" data-blur-id=background-blur data-image-id=background-image data-image-url=/articles/python-packages/featured.png></script><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>tobiwan.dev</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/articles/>Articles</a><span class="px-1 text-primary-500">/</span></li><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/articles/python-packages/>5 Python Must-Know Packages</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">5 Python Must-Know Packages</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-03-08T00:00:00+00:00>8 March 2023</time><span class="px-2 text-primary-500">&#183;</span><span>3255 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">16 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/tags/python/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Python</span></span></a></div></div><div class="flex author author-extra mt-4"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full me-4" width=96 height=96 src=/img/profile_hu_bf308c3f4f6472a1.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><a href=https://ttyobiwan.github.io/authors/piotr/ class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Piotr Tobiasz</a><div class="text-sm text-neutral-700 dark:text-neutral-400">Engineering enjoyer, doing backend stuff with Go, Python and Elixir</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:piotr.tobiasz.it@gmail.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/ttyobiwan target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/piotr-tobiasz-dev target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></span></a></div></div></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#managing-linters-with-pre-commit>Managing linters with pre-commit</a></li><li><a href=#writing-tests-using-pytest>Writing tests using pytest</a></li><li><a href=#data-structures-with-pydantic>Data structures with pydantic</a></li><li><a href=#better-requests-using-httpx>Better requests using httpx</a></li><li><a href=#dynamic-html-with-jinja>Dynamic HTML with Jinja</a></li><li><a href=#summary>Summary</a></li><li><a href=#sources>Sources</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#managing-linters-with-pre-commit>Managing linters with pre-commit</a></li><li><a href=#writing-tests-using-pytest>Writing tests using pytest</a></li><li><a href=#data-structures-with-pydantic>Data structures with pydantic</a></li><li><a href=#better-requests-using-httpx>Better requests using httpx</a></li><li><a href=#dynamic-html-with-jinja>Dynamic HTML with Jinja</a></li><li><a href=#summary>Summary</a></li><li><a href=#sources>Sources</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><p>Saying &ldquo;you must know it&rdquo; in pretty much any field of science can be quite contentious. There is no exception in software development. You may frequently see tweets or posts stating things like &ldquo;you must learn Blockchain if you don&rsquo;t want to be left behind&rdquo; or &ldquo;you must know Kubernetes because it is so popular right now.&rdquo; Spoiler: You don&rsquo;t. However, if you want to be an expert in your field, there might be some topics that are almost universal or are used so frequently that it can be challenging without at least a fundamental understanding.</p><p>Python has gathered an incredibly strong community after over 30 years of its existence. As a result, Python has a plethora of well-known libraries and frameworks. Only by looking at the list of the <a href=https://statisticsanddata.org/data/most-popular-backend-frameworks-2012-2023/ target=_blank>most popular backend frameworks</a>, you can see 2 Python libraries - Django and Flask. Right behind the corner, there is also FastAPI, which, given its popularity, will probably overtake Flask. With numerous excellent libraries available, there must be at least a few that are universal, or ubiquitous enough to qualify as &ldquo;must-knows&rdquo;.</p><h2 class="relative group">Managing linters with pre-commit<div id=managing-linters-with-pre-commit class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#managing-linters-with-pre-commit aria-label=Anchor>#</a></span></h2><p>Writing code is, of course, a major part of software development. Fortunately, formatting and style maintenance are not a major part of writing the code. There are numerous tools that lint the code to ensure that it appears consistently throughout the project, and determine whether the style guide is being followed. You&rsquo;ve probably seen or used at least one of these libraries:</p><ul><li>black</li><li>flake8</li><li>isort</li><li>mypy</li><li>ruff (recently, my favorite one)</li></ul><p>Each of them has its own responsibilities, but in general, they are here to ensure that the code is properly styled and structured. The problem is that by default you need to install and run them separately and manually. This is time-consuming and suboptimal. Luckily, there is a tool for managing and running them all together: <code>pre-commit</code>.</p><p>As the name implies, the main idea behind <code>pre-commit</code> is to run your code checks right before you commit the code, so that changes can be made when it is not too late. However, the tool is more powerful than simply running x and y when a git commit occurs. It enables you to manage linters and checkers via a <code>.pre-commit-config.yaml</code> file rather than installing them as project dependencies. It handles caching installed tools as well as updating them. Here&rsquo;s an example of such a <code>yaml</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>repos</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://github.com/pre-commit/pre-commit-hooks</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>v4.4.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>trailing-whitespace</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>end-of-file-fixer</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>mixed-line-ending</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>check-json</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>check-toml</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>check-yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://github.com/psf/black</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>22.12.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>black</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Black</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://github.com/charliermarsh/ruff-pre-commit</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>v0.0.185</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>ruff</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Ruff</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>args</span>: [<span style=color:#e6db74>&#34;--fix&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://github.com/pre-commit/mirrors-mypy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>v0.991</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>id</span>: <span style=color:#ae81ff>mypy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>MyPy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>exclude</span>: <span style=color:#ae81ff>^.*\b(migrations)\b.*$</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>additional_dependencies</span>: [<span style=color:#e6db74>&#34;types-requests&#34;</span>, <span style=color:#e6db74>&#34;types-redis&#34;</span>]
</span></span></code></pre></div><p>All you have to do is specify which repositories (hooks) you want &lsquo;pre-commit&rsquo; to install and run. There are four hooks visible here:</p><ul><li>Basic ones, provided by <code>pre-commit</code>, which address some of the common issues,</li><li><code>black</code> for code formatting,</li><li><code>ruff</code> for enforcing code style guide,</li><li><code>mypy</code> for static type checking.</li></ul><p><code>pre-commit</code> also enables you to add some extra arguments or dependencies for each hook, as seen in the <code>ruff</code> and <code>mypy</code> cases. All hooks can, of course, be further customized with a config file, such as <code>pyproject.toml</code>.</p><p>With <code>pre-commit</code> installed and <code>.pre-commit-config.yaml</code> in place, you should be able to run <code>pre-commit run --all-files</code> command which will install and run the hooks. Here is an example output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>$ pre-commit run --all-files
</span></span><span style=display:flex><span>trim trailing whitespace.................................................Passed
</span></span><span style=display:flex><span>fix end of files.........................................................Passed
</span></span><span style=display:flex><span>mixed line ending........................................................Passed
</span></span><span style=display:flex><span>check json...............................................................Passed
</span></span><span style=display:flex><span>check toml...............................................................Passed
</span></span><span style=display:flex><span>check yaml...............................................................Passed
</span></span><span style=display:flex><span>Black....................................................................Passed
</span></span><span style=display:flex><span>Ruff.....................................................................Passed
</span></span><span style=display:flex><span>MyPy.....................................................................Passed
</span></span></code></pre></div><p>All the checks passed, and you can now commit & push the code to the remote repository, without wasting money on failed CI checks.</p><h2 class="relative group">Writing tests using pytest<div id=writing-tests-using-pytest class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#writing-tests-using-pytest aria-label=Anchor>#</a></span></h2><p>Tests are a must-know not only in Python but in software development in general. They verify that your code meets the functional requirements. They give you the assurance that you won&rsquo;t alter the working code. Unit tests are used to verify the smallest pieces of code, integration tests examine the integration with dependencies, and end-to-end tests check the complete processes.</p><p><code>unittest</code> is a standard library in Python used for creating tests, providing both basic and advanced testing tools. However, relying solely on <code>unittest</code> may not be optimal in the long run as it may lead to a lot of redundant &ldquo;util&rdquo; code, a lack of suitable extensions, and difficulties in creating tests, ultimately limiting scalability. Fortunately, <code>pytest</code> is a popular testing framework that addresses these limitations and provides several benefits for developers.</p><p><code>pytest</code> allows developers to focus on testing their code without writing any extraneous code that is irrelevant to the test. Unlike <code>unittest</code>, you don&rsquo;t need to create a <code>TestCase</code>-like class or manually mark the tests - <code>pytest</code> will automatically detect them. Additionally, you don&rsquo;t need to use specific assertion functions like <code>assertEqual</code> as <code>pytest</code> makes use of Python&rsquo;s built-in <code>assert</code> keyword. Lastly, <code>pytest</code> offers a more efficient and effective way of managing the setup and teardown dependencies through fixtures.</p><p>Fixtures are one of the most important <code>pytest</code> features. According to <code>pytest</code> <a href=https://docs.pytest.org/en/7.1.x/index.html target=_blank>documentation</a>, fixtures are defined as follows:</p><blockquote><p>In testing, a fixture provides a defined, reliable and consistent context for the tests.</p></blockquote><p>In practice, a fixture is written as a function that provides the necessary resources to make a test functional. For example, in web development, a common fixture is a database connection. When testing something that involves requests to the database, a fixture can be created that starts the connection, passes it to the test, and then cleans and closes the connection after the test is completed.</p><p>For the sake of simplicity consider a case of an in-memory database, that is aware of &ldquo;being connected&rdquo;:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> Any
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> must_knows <span style=color:#f92672>import</span> exceptions
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Database</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Simple, in-memory database.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_entries: list[Any] <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_connected <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>connect</span>(self) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_connected <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>disconnect</span>(self) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_connected <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add</span>(self, entry: Any) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>_connected <span style=color:#f92672>is</span> <span style=color:#66d9ef>False</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> exceptions<span style=color:#f92672>.</span>DatabaseError(<span style=color:#e6db74>&#34;Database is disconnected&#34;</span>)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_entries<span style=color:#f92672>.</span>append(entry)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@property</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>entries</span>(self) <span style=color:#f92672>-&gt;</span> list:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>_connected <span style=color:#f92672>is</span> <span style=color:#66d9ef>False</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> exceptions<span style=color:#f92672>.</span>DatabaseError(<span style=color:#e6db74>&#34;Database is disconnected&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>_entries
</span></span></code></pre></div><p>This database will be utilized in a user service - a simple class that exposes only the most basic operations:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> uuid
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> dataclasses <span style=color:#f92672>import</span> dataclass
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> must_knows <span style=color:#f92672>import</span> exceptions, database
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;User model.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    id: uuid<span style=color:#f92672>.</span>UUID
</span></span><span style=display:flex><span>    email: str
</span></span><span style=display:flex><span>    password: str
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserService</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;User operations manager.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, db: database<span style=color:#f92672>.</span>Database) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>db <span style=color:#f92672>=</span> db
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>register</span>(self, email: str, password1: str, password2: str) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> password1 <span style=color:#f92672>!=</span> password2:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> exceptions<span style=color:#f92672>.</span>ValidationError(<span style=color:#e6db74>&#34;Password must match&#34;</span>)
</span></span><span style=display:flex><span>        user <span style=color:#f92672>=</span> User(id<span style=color:#f92672>=</span>uuid<span style=color:#f92672>.</span>uuid4(), email<span style=color:#f92672>=</span>email, password<span style=color:#f92672>=</span>password1)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>db<span style=color:#f92672>.</span>add(user)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>login</span>(self, email: str, password: str) <span style=color:#f92672>-&gt;</span> uuid<span style=color:#f92672>.</span>UUID:
</span></span><span style=display:flex><span>        user <span style=color:#f92672>=</span> next((u <span style=color:#66d9ef>for</span> u <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>db<span style=color:#f92672>.</span>entries <span style=color:#66d9ef>if</span> u<span style=color:#f92672>.</span>email <span style=color:#f92672>==</span> email), <span style=color:#66d9ef>None</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> user <span style=color:#f92672>is</span> <span style=color:#66d9ef>None</span> <span style=color:#f92672>or</span> user<span style=color:#f92672>.</span>password <span style=color:#f92672>!=</span> password:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> exceptions<span style=color:#f92672>.</span>LoginError(<span style=color:#e6db74>&#34;Invalid credentials&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> user<span style=color:#f92672>.</span>id
</span></span></code></pre></div><p>If you were to test this class without using <code>pytest</code>, you would have to manually create the database object and execute the connect method for each test. Additionally, you would need to implement a teardown method that runs the disconnect method after each test. This process can become cumbersome, especially if the connect and disconnect methods take a longer time to execute or if there are failures that prevent the database from disconnecting properly. This is where fixtures come to the rescue:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># tests/conftest.py</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pytest
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> Generator
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> must_knows <span style=color:#f92672>import</span> database
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@pytest.fixture</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>connected_db</span>() <span style=color:#f92672>-&gt;</span> Generator[database<span style=color:#f92672>.</span>Database, <span style=color:#66d9ef>None</span>, <span style=color:#66d9ef>None</span>]:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Yield connected database.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Disconnect on teardown.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    db <span style=color:#f92672>=</span> database<span style=color:#f92672>.</span>Database()
</span></span><span style=display:flex><span>    db<span style=color:#f92672>.</span>connect()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>yield</span> db
</span></span><span style=display:flex><span>    db<span style=color:#f92672>.</span>disconnect()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># tests/test_user_service.py</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> must_knows.main_dataclass <span style=color:#f92672>import</span> UserService
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestUserService</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Test cases for the UserService class.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_register</span>(self, connected_db):
</span></span><span style=display:flex><span>        srv <span style=color:#f92672>=</span> UserService(db<span style=color:#f92672>=</span>connected_db)
</span></span><span style=display:flex><span>        srv<span style=color:#f92672>.</span>register(<span style=color:#e6db74>&#34;test@user.com&#34;</span>, <span style=color:#e6db74>&#34;testpassword&#34;</span>, <span style=color:#e6db74>&#34;testpassword&#34;</span>)
</span></span><span style=display:flex><span>        uid <span style=color:#f92672>=</span> srv<span style=color:#f92672>.</span>login(<span style=color:#e6db74>&#34;test@user.com&#34;</span>, <span style=color:#e6db74>&#34;testpassword&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>assert</span> uid <span style=color:#f92672>is</span> <span style=color:#f92672>not</span> <span style=color:#66d9ef>None</span>
</span></span></code></pre></div><p>To use fixtures in <code>pytest</code>, all you need to do is define them in the <code>conftest.py</code> file, and <code>pytest</code> will automatically recognize them by name, eliminating the need to import anything. One key aspect of fixtures is that they are structured as Python generators. The code before the yield statement is executed before the test, while the code after yield serves as the teardown, which runs after the test completes or if the test fails. This means that the test itself doesn&rsquo;t need to include any code related to the database connection, nor does it need to worry about the cleanup process after completion.</p><p>The <code>fixture</code> decorator also includes a scope parameter that specifies when the fixture should be initialized and torn down. By default, the scope is set to <code>function</code>, which implies the fixture is initialized and torn down before and after every test. However, you can modify this behavior by setting the scope to <code>session</code>, which ensures that the same database is utilized for all tests and is only disconnected once all tests are finished.</p><p>Another nice feature of <code>pytest</code> is the abundance of excellent plugins. One of the most popular is definitely <code>pytest-cov</code>, which computes test coverage and generates a report. It can afterward be used to detect untested code or to brag about the great quality of the tests (albeit high coverage does not always imply quality).</p><h2 class="relative group">Data structures with pydantic<div id=data-structures-with-pydantic class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#data-structures-with-pydantic aria-label=Anchor>#</a></span></h2><p>Python is mostly used in data science and web development, but no matter what you want to accomplish with it, you will eventually need to parse and validate some data. Of course, you may start from scratch and implement everything, as you can in pretty much any circumstance. You can also use a <code>dataclass</code> module, a Python&rsquo;s builtin. Take a look at the class from the prior example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> uuid
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> dataclasses <span style=color:#f92672>import</span> dataclass, asdict
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span>:
</span></span><span style=display:flex><span>    id: uuid<span style=color:#f92672>.</span>UUID
</span></span><span style=display:flex><span>    email: str
</span></span><span style=display:flex><span>    password: str
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User(id<span style=color:#f92672>=</span>uuid<span style=color:#f92672>.</span>uuid4(), email<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;test@user.com&#34;</span>, password<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;testpass&#34;</span>)
</span></span><span style=display:flex><span>user_dict <span style=color:#f92672>=</span> asdict(user)
</span></span></code></pre></div><p>Since implementing <code>__init__</code> function is no longer required, using the dataclass module is simple and reduces the need for extra code. A dataclass instance may also be easily transformed into a dictionary. Dataclasses might not be adequate, though, when more sophisticated functionality is needed. Several limitations are made clear even in this straightforward scenario.</p><p>First of all, no real validation is taking place. Even though a password should be a string, you may still use an integer and everything will work out. Not to mention the email field, which should take a genuine email address but may be filled with whatever you choose. Also, you often want the id field to be filled up automatically if nothing is provided. In this manner, the user service&rsquo;s &ldquo;register&rdquo; method wouldn&rsquo;t need to create the id. Such behavior is actually possible with the dataclasses:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> uuid
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> dataclasses <span style=color:#f92672>import</span> dataclass, field
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span>:
</span></span><span style=display:flex><span>    email: str
</span></span><span style=display:flex><span>    password: str
</span></span><span style=display:flex><span>    id: uuid<span style=color:#f92672>.</span>UUID <span style=color:#f92672>=</span> field(default_factory<span style=color:#f92672>=</span>uuid<span style=color:#f92672>.</span>uuid4)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User(email<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;test@user.com&#34;</span>, password<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;testpass&#34;</span>)
</span></span></code></pre></div><p>By using the <code>field</code> function and providing a factory to generate a default value, you can make the <code>id</code> field populate automatically when it is not provided. However, you may have noticed that the <code>id</code> field had to be moved to the end of the class. This is because, in dataclasses, fields with default values cannot appear before fields without default values. While this may seem like a minor inconvenience, it can become frustrating when dealing with longer classes where you want to group values together in a more meaningful way. The <code>pydantic</code> package offers a more powerful solution to help you deal with data structures.</p><p><code>pydantic</code> is a library whose main purpose is data parsing and validation. It is much more powerful than dataclasses, though. With <code>pydantic</code>, you construct a new model using a <code>BaseModel</code> class and then specify the fields with type hints:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> uuid
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pydantic <span style=color:#f92672>import</span> BaseModel, EmailStr, Field
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span>(BaseModel):
</span></span><span style=display:flex><span>    id: uuid<span style=color:#f92672>.</span>UUID <span style=color:#f92672>=</span> Field(default_factory<span style=color:#f92672>=</span>uuid<span style=color:#f92672>.</span>uuid4())
</span></span><span style=display:flex><span>    email: EmailStr
</span></span><span style=display:flex><span>    password: str <span style=color:#f92672>=</span> Field(min_length<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span>, max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>32</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User(email<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;test@user.com&#34;</span>, password<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;testpass&#34;</span>)
</span></span><span style=display:flex><span>user_dict <span style=color:#f92672>=</span> user<span style=color:#f92672>.</span>dict()
</span></span></code></pre></div><p>Upon closer inspection, you&rsquo;ll notice that <code>pydantic</code> operates quite differently. Firstly, unlike with dataclasses, you can place the <code>id</code> field at the beginning of the class without any issues. Similar to dataclasses, <code>pydantic</code> offers a <code>Field</code> function that allows you to configure individual fields. Additionally, <code>pydantic</code> provides extra types that can be used to validate input. In this example, the <code>EmailStr</code> type is utilized to ensure that the email field is a valid email address. While your IDE may prefer <code>email=EmailStr("</code><a href=mailto:test@user.com><code>test@user.com</code></a><code>")</code>, instead of the <code>email="</code><a href=mailto:test@user.com><code>test@user.com</code></a><code>"</code>, <code>pydantic</code> can handle both cases seamlessly. Finally, <code>pydantic</code> validates not only the default types but also any constraints specified in the <code>Field</code> function. For instance, in this example, the password field must be a string between 8 and 32 characters in length, effectively disallowing anything else.</p><p>Furthermore, <code>pydantic</code> allows you to quickly add your own validators. Recall the <code>register</code> method once again. It would only create a user if the passwords were the same. Although this logic fits well in the <code>register</code> method, it may alternatively be placed in the user model:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> uuid
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pydantic <span style=color:#f92672>import</span> BaseModel, EmailStr, root_validator, Field
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> must_knows <span style=color:#f92672>import</span> database
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span>(BaseModel):
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;&#34;&#34;User model.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    id: uuid<span style=color:#f92672>.</span>UUID <span style=color:#f92672>=</span> Field(default_factory<span style=color:#f92672>=</span>uuid<span style=color:#f92672>.</span>uuid4)
</span></span><span style=display:flex><span>    email: EmailStr
</span></span><span style=display:flex><span>    password: str <span style=color:#f92672>=</span> Field(min_length<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span>, max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>32</span>)
</span></span><span style=display:flex><span>    password_confirmation: str
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@root_validator</span>(pre<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>validate_passwords</span>(cls, values: dict) <span style=color:#f92672>-&gt;</span> dict:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> values[<span style=color:#e6db74>&#34;password&#34;</span>] <span style=color:#f92672>!=</span> values[<span style=color:#e6db74>&#34;password_confirmation&#34;</span>]:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(<span style=color:#e6db74>&#34;Passwords must match&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> values
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserSerivce</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;User operations manager.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, db: database<span style=color:#f92672>.</span>Database) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>db <span style=color:#f92672>=</span> db
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>register</span>(self, email: EmailStr, password1: str, password2: str) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        user <span style=color:#f92672>=</span> User(email<span style=color:#f92672>=</span>email, password<span style=color:#f92672>=</span>password1, password_confirmation<span style=color:#f92672>=</span>password2)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>db<span style=color:#f92672>.</span>add(user)
</span></span></code></pre></div><p>This way, <code>pydantic</code> first checks if the passwords match, and then if the <code>password</code> field matches the initial criteria, i.e., it has to be a string with a valid length. You can also write validators for a specific field only using the <code>validator</code> decorator. However, in this case, validity depended on two fields simultaneously, which is why the <code>root_validator</code> was used - because it has access to all values. If you want to read more about validators or how powerful <code>pydantic</code> is in general, be sure to check out the <a href=https://docs.pydantic.dev/ target=_blank>official documentation</a> - it&rsquo;s just as great as the library itself.</p><h2 class="relative group">Better requests using httpx<div id=better-requests-using-httpx class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#better-requests-using-httpx aria-label=Anchor>#</a></span></h2><p>Regardless of what software you are building, you will likely end up doing some requests. The essential capabilities for dealing with external APIs are provided by the standard Python <code>requests</code> module. Nevertheless, it does not support a number of essential Python features.</p><p><code>httpx</code> is a modern, alternative HTTP client for Python, which offers a more intuitive and user-friendly API than the standard <code>requests</code> library. The most significant feature of <code>httpx</code> is its async support. It can handle HTTP requests asynchronously, which is beneficial for making several requests at the same time without blocking the main thread. This functionality can improve the performance of applications that require high network I/O. <code>httpx</code> is also built on top of the standard Python <code>typing</code> module, which allows for better code readability and clarity.</p><p><code>httpx</code> provides an elegant and straightforward API to make HTTP requests:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> asyncio
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> httpx <span style=color:#f92672>import</span> AsyncClient
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>    client <span style=color:#f92672>=</span> AsyncClient(base_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://pokeapi.co/api/v2&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Two calls, one after another</span>
</span></span><span style=display:flex><span>    r1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> client<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;/pokemon/ditto&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;r1: </span><span style=color:#e6db74>{</span>r1<span style=color:#f92672>.</span>status_code<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)  <span style=color:#75715e># 200</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># You can use &#39;request&#39; for better configurability</span>
</span></span><span style=display:flex><span>    r2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> client<span style=color:#f92672>.</span>request(<span style=color:#e6db74>&#34;GET&#34;</span>, <span style=color:#e6db74>&#34;/pokemon/jynx&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;r2: </span><span style=color:#e6db74>{</span>r2<span style=color:#f92672>.</span>status_code<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)  <span style=color:#75715e># 200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Two calls made asynchronously</span>
</span></span><span style=display:flex><span>    r3, r4 <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> asyncio<span style=color:#f92672>.</span>gather(
</span></span><span style=display:flex><span>        client<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;/pokemon/lucario&#34;</span>),
</span></span><span style=display:flex><span>        client<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;/pokemon/snorlax&#34;</span>),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;r3: </span><span style=color:#e6db74>{</span>r3<span style=color:#f92672>.</span>status_code<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)  <span style=color:#75715e># 200</span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;r4: </span><span style=color:#e6db74>{</span>r4<span style=color:#f92672>.</span>status_code<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)  <span style=color:#75715e># 200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Call resulting in 404 and raising an &#39;HTTPStatusError&#39;</span>
</span></span><span style=display:flex><span>    r5 <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> client<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;/pokemon/john-wick&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;r5: </span><span style=color:#e6db74>{</span>r5<span style=color:#f92672>.</span>status_code<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)  <span style=color:#75715e># 404</span>
</span></span><span style=display:flex><span>    r5<span style=color:#f92672>.</span>raise_for_status()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    asyncio<span style=color:#f92672>.</span>run(main())
</span></span></code></pre></div><p>The preceding example is clearly quite simple, but what&rsquo;s also great about <code>httpx</code> is how easily configurable it is. This includes headers, cookies, authentication, and other request parameters:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>configurability_example</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>    client <span style=color:#f92672>=</span> AsyncClient(
</span></span><span style=display:flex><span>        base_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://pokeapi.co/api/v2&#34;</span>,
</span></span><span style=display:flex><span>        auth<span style=color:#f92672>=</span>(<span style=color:#e6db74>&#34;ash&#34;</span>, <span style=color:#e6db74>&#34;ketchum123&#34;</span>),
</span></span><span style=display:flex><span>        cookies<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;access_token&#34;</span>: <span style=color:#e6db74>&#34;Bearer PIKACHU&#34;</span>},
</span></span><span style=display:flex><span>        headers<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Content-Type&#34;</span>: <span style=color:#e6db74>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Accept&#34;</span>: <span style=color:#e6db74>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># All requests share the same configuration</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> client<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;/pokemon/ditto&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> client<span style=color:#f92672>.</span>request(<span style=color:#e6db74>&#34;GET&#34;</span>, <span style=color:#e6db74>&#34;/pokemon/jynx&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> client<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;/pokemon/snorlax&#34;</span>)
</span></span></code></pre></div><p>All of this makes <code>httpx</code> an easy and powerful way for Python scripts to interact with the APIs.</p><h2 class="relative group">Dynamic HTML with Jinja<div id=dynamic-html-with-jinja class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#dynamic-html-with-jinja aria-label=Anchor>#</a></span></h2><p>As previously mentioned, Python is primarily used for data science and backend development, which means that frontend tasks are rarely performed within Python scripts. However, there are common scenarios where a little bit of frontend functionality is needed in a backend task. A good example can be email notifications, where you want to notify a user when something occurs on the backend and include details about the event in the email. In most cases, it&rsquo;s desirable to use HTML format for the email, allowing for structured and styled content.</p><p>To address this need, <code>Jinja</code> was created by Armin Ronacher, the creator of <code>Flask</code> and <code>click</code>. <code>Jinja</code> is a templating engine that allows for working with HTML files in Python scripts. However, the capabilities of <code>Jinja</code> go beyond simple file manipulation - it&rsquo;s a powerful tool for creating dynamic HTML content in a Python environment.</p><p>One of the primary benefits of using <code>Jinja</code> is the ability to use templates. Templates allow you to design a structure for your HTML files that may be reused. This is especially beneficial if you have a consistent layout for different emails or web pages.</p><p>To use <code>Jinja</code>, you first need to define a template. This is usually an HTML file with some placeholders for the dynamic content. For example, you could have a template for a simple email like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>h1</span>&gt;{{title}}&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>p</span>&gt;{{content}}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><p>In this template, <code>{{title}}</code> and <code>{{content}}</code> are placeholders that will be replaced with actual values at runtime. To render the template, you need to create a <code>Jinja</code> environment and load the template from a file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> jinja2 <span style=color:#f92672>import</span> Environment, FileSystemLoader
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>env <span style=color:#f92672>=</span> Environment(loader<span style=color:#f92672>=</span>FileSystemLoader(<span style=color:#e6db74>&#34;must_knows/templates/&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>template <span style=color:#f92672>=</span> env<span style=color:#f92672>.</span>get_template(<span style=color:#e6db74>&#34;example.html&#34;</span>)
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;Hello&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>: <span style=color:#e6db74>&#34;World!&#34;</span>}
</span></span><span style=display:flex><span>html <span style=color:#f92672>=</span> template<span style=color:#f92672>.</span>render(data)
</span></span><span style=display:flex><span>print(html)
</span></span></code></pre></div><p>In the example above, the <code>FileSystemLoader</code> is used to load templates from the <code>templates</code> directory. Once you have the environment and the template, you can render it with some data. The <code>render</code> method replaces the placeholders in the template with the values from the <code>data</code> dictionary and returns the rendered HTML.</p><p>Another useful feature is the ability to establish &ldquo;base&rdquo; templates that may be extended by more customized templates. In this manner, you may put shared code in the base template and reuse it in all templates. Then you simply provide the blocks that will be injected into particular templates:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!-- base.html --&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;html&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;body&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;h1&gt;</span>{% block title %}{% endblock %}<span style=color:#f92672>&lt;/h1&gt;</span>
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;p&gt;</span>{% block content %}{% endblock %}<span style=color:#f92672>&lt;/p&gt;</span>
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;footer&gt;</span>{% block footer %}Made using @Jinja{% endblock %}<span style=color:#f92672>&lt;/footer&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/body&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/html&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- extended_example.html --&gt;</span>
</span></span><span style=display:flex><span>{% extends &#34;base.html&#34; %}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{% block title %}{{title}}{% endblock %}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{% block content %}{{content}}{% endblock %}
</span></span></code></pre></div><p>Of course, <code>Jinja</code> is considerably more powerful than merely changing placeholders. You may build intricate templates with conditionals, loops, macros, and filters to suit a variety of use situations. Also, it works nicely with <code>Django</code> and <code>Flask</code>, two other Python web frameworks. The most common use cases include generating reports and emails, but it can even be used for building web pages.</p><h2 class="relative group">Summary<div id=summary class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#summary aria-label=Anchor>#</a></span></h2><p>Python is a versatile and user-friendly language that offers a wealth of libraries for virtually any type of use case. Identifying packages that are considered &ldquo;must-know&rdquo; might, however, be challenging. Backend developers might recommend <code>Flask</code> or <code>FastAPI</code>, while data scientists would suggest <code>Tensorflow</code> or <code>pandas</code>. While these packages are undoubtedly valuable in their respective fields, they may not be suitable for everyone. Presented packages are just a small fraction of the countless packages available in the Python ecosystem, but they are among the most important and extensively used. By learning and mastering these packages, you can become a more proficient Python developer, regardless of your field.</p><h2 class="relative group">Sources<div id=sources class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#sources aria-label=Anchor>#</a></span></h2><p>Code examples used in the article can be found here: <a href=https://github.com/ttyobiwan/must_knows_py target=_blank>link</a>.</p><p>Documentation page of each library:</p><ul><li><a href=https://pre-commit.com/ target=_blank>pre-commit</a></li><li><a href=https://docs.pytest.org/en/7.2.x/ target=_blank>pytest</a></li><li><a href=https://docs.pydantic.dev/ target=_blank>pydantic</a></li><li><a href=https://www.python-httpx.org/ target=_blank>httpx</a></li><li><a href=https://jinja.palletsprojects.com/en/3.1.x/ target=_blank>Jinja</a></li></ul></div></div><script type=text/javascript src=/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA==" data-oid=views_articles/python-packages/index.md data-oid-likes=likes_articles/python-packages/index.md></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/articles/ddd-intro/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Practical Introduction to Domain-Driven Design</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-02-28T00:00:00+00:00>28 February 2023</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/articles/textual-chat/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Using Textual to Build a ChatGPT TUI App</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-03-15T00:00:00+00:00>15 March 2023</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0 z-10"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2025
Piotr Tobiasz</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://ttyobiwan.github.io/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>